<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>So You Think You Can Scroll</title>
<link rel="stylesheet" href="css/prism.css" />

<style>
  @import url(http://fonts.googleapis.com/css?family=PT+Serif|PT+Serif:b|PT+Serif:i);
pre[class*="language-"] {
  background: #fff;
}

section {
  background: #fff;
  color: #000;
  padding: 2em;
  font-family: "Yanone Kaffeesatz", "PT Serif", Baskerville, Georgia;
}

#follow {
  background: none;
}

.grey {
  color: #777;
}

.center {
  text-align: center;
  font-size: 120%;
}

.title {
  text-align:center;
  font-size:500%;
  /* line-height: 1.2; */
}

.subtitle {
  text-align:center;
  font-size: 180%;
}

.grey, .gray {
  color: #888;
}

.caption {
  position: absolute;
  right: 2%;
  bottom: 0%;
  color: #777;
}

.lcaption {
  position: absolute;
  left: 2%;
  bottom: 0%;
  color: #777;
}

.quote {
  font-size:180%;
}

.rcaption {
  position: absolute;
  right: 2%;
  bottom: 0%;
  color: #777;
}

.line-highlight {
  z-order: -10;
  background: -webkit-linear-gradient(left, hsla(53, 100%, 50%,.3) 70%, hsla(24, 20%, 50%,0));
  /* background-color: yellow; */
}

circle.node {
  cursor: pointer;
  stroke: #000;
  stroke-width: .5px;
}
line.link {
  fill: none;
  stroke: #444;
  stroke-width: 4px;
}


a:link,
a:visited {
  color: orange;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

video {
  width: 100%;
  margin: 0 auto;
  display: block;
}

.tootall {
  height: 100%;
}

.toowide {
  width: 100%;
}

#arrow {
    position: relative;
    width: 58px;
    margin: 0 auto;
  }


#arrow svg {
    position: absolute;
    top: 0;
    left: 0;
    -webkit-animation: down 2s infinite;
    -ms-animation: down 2s infinite;
    -moz-animation: down 2s infinite;
    animation: down 2s infinite;
  }

  @-webkit-keyframes down {
    0% { top: 0; }
    50% { top: 20px; }
    100% { top: 0; }
  }

  @-ms-keyframes down {
    0% { top: 0; }
    50% { top: 20px; }
    100% { top: 0; }
  }

  @-moz-keyframes down {
    0% { top: 0; }
    50% { top: 20px; }
    100% { top: 0; }
  }

  @keyframes down {
    0% { top: 0; }
    50% { top: 20px; }
    100% { top: 0; }
  }



</style>
<div id="pagenumber" style="z-index:100;position:fixed;left:1%;bottom:7%;"></div>

<section style="text-align:center;padding-top:5em;">
<p style="font-size:200%;">Jim Vallandingham</p>
<p>@vlandham</p>
<br/><br/><br/>
  <div id="arrow" style="opacity: 1;">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="20px" viewBox="0 0 35 20" enable-background="new 0 0 35 20" xml:space="preserve">
    <polyline fill="none" stroke="#231F20" stroke-width="6.6008" stroke-miterlimit="10" points="4,3.988 17.756,13.743 30.342,3.988
    "></polyline>
    </svg>
  </div>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">2013</p>
</section>

<section id='force' style="text-align:center;padding-top:4em;">
  <svg id="forcevis"></svg>
  <p class="subtitle" style="z-index:100;">Abusing The Force</p>
</section>

<!-- <section style="text&#45;align:center;padding&#45;top:4em;"> -->
<!--   <p class="title">Officially The First Back</p> -->
<!--   <p class="subtitle" >A Technical Detail</p> -->
<!-- </section> -->
<!--  -->
<!-- <section style="text&#45;align:center;padding&#45;top:3em;"> -->
<!-- <img src="img/f_santiago.jpg" class="tootall"/> -->
<!-- </section> -->

<section style="text-align:center;padding-top:5em;">
<p style="font-size:220%;"><b>So You Think You Can Scroll</b></p>
<p class="subtitle">Jim Vallandingham</p>
<p class="grey">@vlandham</p>
<br/><br/><br/>
  <div id="arrow" style="opacity: 1;">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="20px" viewBox="0 0 35 20" enable-background="new 0 0 35 20" xml:space="preserve">
    <polyline fill="none" stroke="#231F20" stroke-width="6.6008" stroke-miterlimit="10" points="4,3.988 17.756,13.743 30.342,3.988
    "></polyline>
    </svg>
  </div>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolling</p>
  <p class="subtitle" >A Short History</p>
</section>

<section style="text-align:center;padding-top:3em;">
<img src="img/MacGUI_0.jpg" style=""/>
</section>

<section style="text-align:center;padding-top:3em;">
<img src="img/hypercard.gif" style=""/>
</section>

<section style="text-align:center;padding-top:3em;">
<img src="img/geos.png" style=""/>
</section>

<section style="text-align:center;padding-top:3em;">
<img src="img/scroll_history.png" class="toowide"/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/scrollwheel.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="quote">"One of the most useful innovations in pointing devices"</p>
  <p class="caption"><a href="http://www.amazon.com/About-Face-Essentials-Interaction-Design/dp/0470084111">Alan Cooper</a></p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/old_scrollwheel.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/uglymouse.jpg" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:4em;">
<img src="img/mouse.png" style=""/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/excel.gif" class="tootall"/>
</section>

<!-- <section style="text&#45;align:center;padding&#45;top:1em;"> -->
<!-- <img src="img/joystick.png" class="tootall"/> -->
<!-- </section> -->


<section style="text-align:center;padding-top:1em;">
<img src="img/swipes.png" style="width:100%;"/>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Scrolling is a continuation</p>
  <p class="subtitle grey" >Clicking is a decision</p>
  <p class="caption"><a href="http://bokardo.com/archives/scrolling-easier-clicking/">Joshua Porter</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle">Parallax Scrolling</p>
  <p class="subtitle">Infinite Scrolling</p>
  <p class="subtitle">Art Scrolling</p>
</section>

<section>
  <video preload='none' src="webm/sewing_help.webm">
  </video>
</section>

<section>
  <video preload='none' src="webm/embroiden.webm" class="tootall">
  </video>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolling</p>
  <p class="subtitle">In Visualization</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrollable Dimension</p>
</section>

<section>
  <video preload='none' src="webm/mile.webm" loop>
  </video>
    <p class="caption"><a href="http://www.onemilescroll.com/">One Mile Scroll</a></p>
</section>

<section>
  <video preload='none' src="webm/sats.webm" loop>
  </video>
    <p class="caption"><a href="http://qz.com/296941/interactive-graphic-every-active-satellite-orbiting-earth/">Active Satellites</a></p>
</section>

<section style="background-color:black;">
  <video preload='none' src="webm/moon.webm" loop>
  </video>
    <p class="caption"><a href="http://joshworth.com/dev/pixelspace/pixelspace_solarsystem.html">1px Moon</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolling Triggers</p>
</section>

<section>
  <video preload='none' src="webm/hottest.webm" loop>
  </video>
    <p class="caption"><a href="http://www.bloomberg.com/graphics/2014-hottest-year-on-record/">Hottest Year</a></p>
</section>

<section>
  <video preload='none' src="webm/soccer_cut.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2014/06/13/sports/worldcup/world-cup-balls.html">World Cup Balls</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolling Steps</p>
</section>

<section>
  <video preload='none' src="webm/color.webm" loop>
  </video>
    <p class="caption"><a href="http://muyueh.com/greenhoney/">Color Meanings</a></p>
</section>

<section>
  <video preload='none' src="webm/soccer_clubs.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2014/06/20/sports/worldcup/how-world-cup-players-are-connected.html">Clubs That Connect</a></p>
</section>

<section>
  <video preload='none' src="webm/suv.webm" loop>
  </video>
    <p class="caption"><a href="http://www.bloomberg.com/graphics/2015-auto-sales/">Auto Sales</a></p>
</section>

<!-- <section> -->
<!--   <video preload='none' src="webm/islamic_states.webm"  loop> -->
<!--   </video> -->
<!--     <p class="caption"><a href="http://www.washingtonpost.com/wp&#45;srv/special/world/islamic&#45;state&#45;tracker/">Islamic State Tracker</a></p> -->
<!-- </section> -->

<section>
  <video preload='none' src="webm/skate.webm"  loop>
  </video>
    <p class="caption"><a href="http://www.georgelmurphy.com/berrics/">Battle At The Berrics</a></p>
</section>

<!-- <section> -->
<!--   <video preload='none' src="webm/charts.webm" loop> -->
<!--   </video> -->
<!--     <p class="caption"><a href="http://www.nytimes.com/interactive/2014/06/05/upshot/how&#45;the&#45;recession&#45;reshaped&#45;the&#45;economy&#45;in&#45;255&#45;charts.html?abt=0002&#38;abg=1">Recession Charts</a></p> -->
<!-- </section> -->

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolling Continuous</p>
</section>

<section>
  <video preload='none' src="webm/russia.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/newsgraphics/2013/10/13/russia/">Russia Left Behind</a></p>
</section>


<!-- <section> -->
<!--   <video preload='none' src="webm/marathon_cut.webm" loop> -->
<!--   </video> -->
<!--     <p class="lcaption"><a href="http://www.nytimes.com/interactive/2014/10/28/sports/marathon&#45;videos.html">Marathon Videos</a></p> -->
<!-- </section> -->


<section>
  <video preload='none' src="webm/water.webm" loop>
  </video>
    <p class="caption"><a href="http://www.angelamorelli.com/water/">Water</a></p>
</section>

<section>
  <video preload='none' src="webm/congress.webm" loop>
  </video>
    <p class="caption"><a href="http://letsfreecongress.org/">Lets Free Congress</a></p>
</section>

<!-- <section> -->
<!--   <video preload='none' src="webm/jeter.webm" loop> -->
<!--   </video> -->
<!--     <p class="caption"><a href="http://www.nytimes.com/interactive/2014/09/14/sports/baseball/jeter&#45;swings.html">Jeter Swings</a></p> -->
<!-- </section> -->
<!--  -->

<section>
  <video preload='none' src="webm/dawn_wall.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2015/01/09/sports/the-dawn-wall-el-capitan.html?_r=0">Dawn Wall</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Interactive Storytelling</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrollytelling</p>
  <!-- <p class="subtitle">(Interactive Storytelling)</p> -->
</section>

<section style="text-align:center;padding-top:1em;background-color:#FCFCFA;">
<img src="img/snowfall.png" style="width:100%;"/>
    <p class="caption"><a href="http://www.nytimes.com/projects/2012/snow-fall">Snow Fall</a></p>
</section>
<section style="text-align:center;padding-top:4em;">
  <p class="quote">"The Web is a Storytelling Medium"</p>
  <p class="caption"><a href="http://www.debaird.net/blendededunet/2010/04/the-web-is-a-storytelling-medium.html">Bran Ferren</a></p>
</section>

<section>
  <video preload='none' src="webm/daft.webm" loop>
  </video>
    <p class="caption"><a href="http://pitchfork.com/features/cover-story/reader/daft-punk/">Daft Punk</a></p>
</section>

<section>
  <video preload='none' src="webm/shark.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/newsgraphics/2013/10/27/south-china-sea/">Shark &amp; Minnow</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrollwork</p>
  <p class="subtitle">Implementation Details</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Demo</p>
  <p class="subtitle">Potentially Humerous</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle">Events</p>
  <p class="subtitle" >&amp;</p>
  <p class="subtitle">Transitions</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scroll Events</p>
  <p class="subtitle">Detecting The Scroll</p>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.003.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.004.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.005.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.006.png" style="height:100%;"/>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre data-line="4"><code class="language-javascript">sectionPositions = [];
var startPos;
sections.each(function(d,i) {
  var top = this.getBoundingClientRect().top;
  if(i === 0) {
    startPos = top;
  }

  sectionPositions.push(top - startPos);
});
    </code></pre>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre data-line="9"><code class="language-javascript">sectionPositions = [];
var startPos;
sections.each(function(d,i) {
  var top = this.getBoundingClientRect().top;
  if(i === 0) {
    startPos = top;
  }

  sectionPositions.push(top - startPos);
});
    </code></pre>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.005.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.007.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:0;background-color:#fff;">
<img src="img/scroller_implementation.008.png" style="height:100%;"/>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre data-line="2"><code class="language-javascript">function position() {
  var pos = window.pageYOffset - 10;
  var sectionIndex = d3.bisect(sectionPositions, pos);
  sectionIndex = Math.min(sections.size() - 1, sectionIndex);

  if (currentIndex !== sectionIndex) {
    dispatch.active(sectionIndex);
    currentIndex = sectionIndex;
  }
}
</code></pre>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre data-line="3"><code class="language-javascript">function position() {
  var pos = window.pageYOffset - 10;
  var sectionIndex = d3.bisect(sectionPositions, pos);
  sectionIndex = Math.min(sections.size() - 1, sectionIndex);

  if (currentIndex !== sectionIndex) {
    dispatch.active(sectionIndex);
    currentIndex = sectionIndex;
  }
}
</code></pre>
</section>

<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:80%;"> -->
<!--     <pre><code class="language&#45;javascript">var tops = [0, 100, 200, 300]; -->
<!--  -->
<!-- d3.bisect(tops, 0); -->
<!-- //=> 1 -->
<!-- </code></pre> -->
<!-- </section> -->
<!--  -->
<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:80%;"> -->
<!--     <pre><code class="language&#45;javascript">var tops = [0, 100, 200, 300]; -->
<!--  -->
<!-- d3.bisect(tops, 0); -->
<!-- //=> 1 -->
<!--  -->
<!-- d3.bisect(tops, 99); -->
<!-- //=> 1 -->
<!-- </code></pre> -->
<!-- </section> -->
<!--  -->
<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:80%;"> -->
<!--     <pre><code class="language&#45;javascript">var tops = [0, 100, 200, 300]; -->
<!--  -->
<!-- d3.bisect(tops, 0); -->
<!-- //=> 1 -->
<!--  -->
<!-- d3.bisect(tops, 99); -->
<!-- //=> 1 -->
<!--  -->
<!-- d3.bisect(tops, 100); -->
<!-- //=> 2 -->
<!-- </code></pre> -->
<!-- </section> -->

<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:80%;"> -->
<!--     <pre><code class="language&#45;javascript">var tops = [0, 100, 200, 300]; -->
<!--  -->
<!-- d3.bisect(tops, 0); -->
<!-- //=> 1 -->
<!--  -->
<!-- d3.bisect(tops, 99); -->
<!-- //=> 1 -->
<!--  -->
<!-- d3.bisect(tops, 100); -->
<!-- //=> 2 -->
<!--  -->
<!-- d3.bisect(tops, &#45;10); -->
<!-- //=> 0 -->
<!-- </code></pre> -->
<!-- </section> -->
<!--  -->
<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:80%;"> -->
<!--     <pre data&#45;line="2"><code class="language&#45;javascript">function position() { -->
<!--   var pos = window.pageYOffset &#45; 10; -->
<!--   var sectionIndex = d3.bisect(sectionPositions, pos); -->
<!--   sectionIndex = Math.min(sections.size() &#45; 1, sectionIndex); -->
<!--  -->
<!--   if (currentIndex !== sectionIndex) { -->
<!--     dispatch.active(sectionIndex); -->
<!--     currentIndex = sectionIndex; -->
<!--   } -->
<!-- } -->
<!-- </code></pre> -->
<!-- </section> -->
<!--  -->

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre data-line="7"><code class="language-javascript">function position() {
  var pos = window.pageYOffset - 10;
  var sectionIndex = d3.bisect(sectionPositions, pos);
  sectionIndex = Math.min(sections.size() - 1, sectionIndex);

  if (currentIndex !== sectionIndex) {
    dispatch.active(sectionIndex);
    currentIndex = sectionIndex;
  }
}
</code></pre>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre><code class="language-javascript">// create dispatcher
var dispatch = d3.dispatch("active");
    </code></pre>
</section>

<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre><code class="language-javascript">// create dispatcher
var dispatch = d3.dispatch("active");

// send event
dispatch.active(sectionIndex);
    </code></pre>
</section>


<section  style="text-align:center;padding-top:2em;font-size:80%;">
    <pre><code class="language-javascript">// create dispatcher
var dispatch = d3.dispatch("active");

// send event
dispatch.active(sectionIndex);

// listen for event
dispatch.on("active", function(index) {
  // ...
});
    </code></pre>
</section>

<section  style="text-align:center;padding-top:0;font-size:80%;">
    <pre data-line="7"><code class="language-javascript">function position() {
  var pos = window.pageYOffset - 10;
  var sectionIndex = d3.bisect(sectionPositions, pos);
  sectionIndex = Math.min(sections.size() - 1, sectionIndex);

  if (currentIndex !== sectionIndex) {
    dispatch.active(sectionIndex);
    currentIndex = sectionIndex;
  }
}
</code></pre>
</section>

<!-- <section  style="text&#45;align:center;padding&#45;top:0;font&#45;size:80%;"> -->
<!--     <pre data&#45;line=""><code class="language&#45;javascript">function position() { -->
<!--   var pos = window.pageYOffset &#45; 10; -->
<!--   var sectionIndex = d3.bisect(sectionPositions, pos); -->
<!--   sectionIndex = Math.min(sections.size() &#45; 1, sectionIndex); -->
<!--  -->
<!--   if (currentIndex !== sectionIndex) { -->
<!--     dispatch.active(sectionIndex); -->
<!--     currentIndex = sectionIndex; -->
<!--   } -->
<!--   // within section animations ... -->
<!-- } -->
<!-- </code></pre> -->
<!-- </section> -->
<!--  -->

<!-- <section  style="text&#45;align:center;padding&#45;top:0;font&#45;size:80%;"> -->
<!--     <pre data&#45;line="13,14"><code class="language&#45;javascript">function position() { -->
<!--   var pos = window.pageYOffset &#45; 10; -->
<!--   var sectionIndex = d3.bisect(sectionPositions, pos); -->
<!--   sectionIndex = Math.min(sections.size() &#45; 1, sectionIndex); -->
<!--  -->
<!--   if (currentIndex !== sectionIndex) { -->
<!--     dispatch.active(sectionIndex); -->
<!--     currentIndex = sectionIndex; -->
<!--   } -->
<!--  -->
<!--   var prevIndex = Math.max(sectionIndex &#45; 1, 0); -->
<!--   var prevTop = sectionPositions[prevIndex]; -->
<!--   var progress = (pos &#45; prevTop) / -->
<!--       (sectionPositions[sectionIndex] &#45; prevTop); -->
<!--   dispatch.progress(currentIndex, progress); -->
<!-- }</code></pre> -->
<!-- </section> -->

<!-- <section  style="text&#45;align:center;padding&#45;top:0;font&#45;size:80%;"> -->
<!--     <pre data&#45;line="15"><code class="language&#45;javascript">function position() { -->
<!--   var pos = window.pageYOffset &#45; 10; -->
<!--   var sectionIndex = d3.bisect(sectionPositions, pos); -->
<!--   sectionIndex = Math.min(sections.size() &#45; 1, sectionIndex); -->
<!--  -->
<!--   if (currentIndex !== sectionIndex) { -->
<!--     dispatch.active(sectionIndex); -->
<!--     currentIndex = sectionIndex; -->
<!--   } -->
<!--  -->
<!--   var prevIndex = Math.max(sectionIndex &#45; 1, 0); -->
<!--   var prevTop = sectionPositions[prevIndex]; -->
<!--   var progress = (pos &#45; prevTop) / -->
<!--       (sectionPositions[sectionIndex] &#45; prevTop); -->
<!--   dispatch.progress(currentIndex, progress); -->
<!-- }</code></pre> -->
<!-- </section> -->

<section style="text-align:center;padding-top:4em;">
  <p class="title">Transitions</p>
  <p class="subtitle">transition all the things</p>
</section>

<section id="transition" style="text-align:center;padding-top:4em;">
  <svg style="padding-top:4em;"id="title2" height="200" width="1000" xmlns="http://www.w3.org/2000/svg" version="1.1" >
    <defs>
    <clipPath id="path2">
    <text x="0" y="150" textLength="900" lengthAdjust="spacing" font-family="Raleway" font-weight="800" font-size="200px" >Transitions</text>
    </clipPath>
    </defs>
    <image clip-path="url(#path2)" height="100%" width="100%" xlink:href="img/header2.jpg" />
  </svg>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Setup All Elements at the Start</p>
</section>

<section  style="text-align:center;padding-top:0em;font-size:100%;">
    <pre data-line=""><code class="language-javascript">function setupVis() {
  g.append("text")
    .attr("class", "sub-title openvis-title")
    .attr("x", width / 2)
    .attr("y", (height / 3) + (height / 5) )
    .text("OpenVis Conf");

  g.selectAll(".openvis-title")
    .attr("opacity", 0);

  // everything else ...
}
</code></pre>
</section>

<section  style="text-align:center;padding-top:0em;font-size:100%;">
    <pre data-line="9"><code class="language-javascript">function setupVis() {
  g.append("text")
    .attr("class", "sub-title openvis-title")
    .attr("x", width / 2)
    .attr("y", (height / 3) + (height / 5) )
    .text("OpenVis Conf");

  g.selectAll(".openvis-title")
    .attr("opacity", 0);

  // everything else ...
}
</code></pre>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle">Each Section Gets a Function</p>
</section>

<section  style="text-align:center;padding-top:0em;font-size:100%;">
    <pre><code class="language-javascript">
activateFunctions[0] = showTitle;
activateFunctions[1] = showFillerTitle;
activateFunctions[2] = showGrid;
activateFunctions[3] = highlightGrid;
activateFunctions[4] = showBar;
activateFunctions[5] = showHistPart;
activateFunctions[6] = showHistAll;
activateFunctions[7] = showCough;
activateFunctions[8] = showHistAll;
    </code></pre>
</section>

<section  style="text-align:center;padding-top:3em;font-size:100%;">
  <pre><code class="language-javascript">dispatch.on("active", function(index) {
  activateFunctions[index]();
}
    </code></pre>
</section>



<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Section Functions:</p>
  <p class="subtitle" >Show Themselves</p>
  <p class="subtitle" >Hide Their Neighbors</p>
</section>

<section style="text-align:center;padding-top:1em;background-color:#fff;">
<img src="img/grid.png" class="tootall"/>
</section>

<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line=""><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
</section>

<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line="5"><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
</section>


<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line="14"><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
</section>

<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line="13"><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
</section>


<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Everything is a Transition</p>
</section>

<section id="circle" style="text-align:center;">
  <svg style="" id="circleSVG" height="200" width="1000" xmlns="http://www.w3.org/2000/svg" version="1.1" >
  </svg>
    <p class="caption">Regular Transitions</p>
</section>

<section id="circle2" style="text-align:center;">
  <svg style="" id="circle2SVG" height="200" width="1000" xmlns="http://www.w3.org/2000/svg" version="1.1" >
  </svg>
    <p class="caption">Interrupted Transitions - Good!</p>
</section>

<section id="circle3" style="text-align:center;">
  <svg style="" id="circle3SVG" height="200" width="1000" xmlns="http://www.w3.org/2000/svg" version="1.1" >
  </svg>
    <p class="caption">Uninterrupted Transitions - Bad!</p>
</section>


<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line=""><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
  </section>

<section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line="3,8"><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
  </section>

  <section  style="text-align:center;padding-top:0em;font-size:84%;">
    <pre data-line="4"><code class="language-javascript">function showGrid() {
  g.selectAll(".count-title")
    .transition()
    .duration(0)
    .attr("opacity", 0);

  g.selectAll(".square")
    .transition()
    .duration(600)
    .delay(function(d,i) {
      return 5 * d.row;
    })
    .attr("opacity", 1.0)
    .attr("fill", "#ddd");
}</code></pre>
  </section>

<!-- <section style="text&#45;align:center;padding&#45;top:4em;"> -->
<!--   <p class="subtitle">Named Transitions are Cool</p> -->
<!-- </section> -->
<!--  -->
<!-- <section id="named" style="text&#45;align:center;"> -->
<!--   <svg style="" id="namedSVG" height="200" width="1000" xmlns="http://www.w3.org/2000/svg" version="1.1" > -->
<!--   </svg> -->
<!--     <p class="caption">Named Transitions &#45; Cool!</p> -->
<!-- </section> -->
<!--  -->
<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:100%;"> -->
<!--     <pre data&#45;line=""><code class="language&#45;javascript">g.selectAll(".fill&#45;square") -->
<!--   .transition("move&#45;squares") -->
<!--   .duration(800) -->
<!--   .attr("x", function(d,i) { -->
<!--     return d.x; -->
<!--   }) -->
<!--   .attr("y", function(d,i) { -->
<!--     return d.y; -->
<!--   }); -->
<!--     </code></pre> -->
<!-- </section> -->
<!--  -->
<!-- <section  style="text&#45;align:center;padding&#45;top:2em;font&#45;size:100%;"> -->
<!--     <pre data&#45;line="2"><code class="language&#45;javascript">g.selectAll(".fill&#45;square") -->
<!--   .transition("move&#45;squares") -->
<!--   .duration(800) -->
<!--   .attr("x", function(d,i) { -->
<!--     return d.x; -->
<!--   }) -->
<!--   .attr("y", function(d,i) { -->
<!--     return d.y; -->
<!--   }); -->
<!--     </code></pre> -->
<!-- </section> -->

<section style="text-align:center;padding-top:4em;">
  <p class="title">Dangers</p>
  <p class="subtitle">In Scrolling</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Scrolling is a continuation</p>
  <p class="subtitle grey" >Unless it is disrupted</p>
</section>

<section style="text-align:center;padding-top:1em;background-color:#FCFCFA;">
<img src="img/how_to_scroll.png" style="height:100%;"/>
    <p class="caption"><a href="http://bost.ocks.org/mike/scroll/">How To Scroll</a></p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/mice_scroll.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scrolljacking</p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/nordstrom.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/nordstrom2.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/nordstrom_scrolljack.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:1em;">
  <p class="quote">"This is terrible."</p>
  <p class="caption">Jim on a Bad Day at Work</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle" >Scrolling Mental Model</p>
  <p class="subtitle grey" >Inconsistent Metaphor?</p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/moving_window.jpg" style="height:100%;"/>
    <p class="caption"><a href="http://kiledaldesign.no/en/is-up-really-up/">Jesper Kiledal - Is Up Really Up?</a></p>
    <p class="lcaption">Moving Window Model</p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/moving_text.jpg" style="height:100%;"/>
    <p class="caption"><a href="http://kiledaldesign.no/en/is-up-really-up/">Jesper Kiledal - Is Up Really Up?</a></p>
    <p class="lcaption">Moving Text Model</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Alternatives</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="quote">"I miss the days of the stepper."</p>
  <p class="caption">Anonymous Important Data Visualizer</p>
</section>

<section style="text-align:center;padding-top:0;">
  <video class="tootall" preload='none' src="webm/stepper.webm" loop>
  </video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2013/05/07/education/college-admissions-gap.html">College Gap</a></p>
</section>

<section style="text-align:center;padding-top:1em;background-color:black;">
  <video preload='none' src="webm/stepper2.webm" loop></video>
    <p class="caption"><a href="http://www.bloomberg.com/dataview/2014-04-17/how-americans-die.html">How Americans Die</a></p>
</section>

<section style="text-align:center;padding-top:1em;background-color:white;">
  <img src="img/3d.png" class="tootall" />
    <p class="caption"><a href="http://www.nytimes.com/interactive/2015/03/19/upshot/3d-yield-curve-economic-growth.html">3d of Economic Future</a></p>
</section>

<!-- <section style="text&#45;align:center;padding&#45;top:4em;"> -->
<!--   <p class="subtitle" >Card Sharks</p> -->
<!--   <p class="subtitle grey" >Holy Scrollers</p> -->
<!-- </section> -->

<!-- <section style="text&#45;align:center;padding&#45;top:2em;"> -->
<!-- <img src="img/scroll_vs_card.png" style=""/> -->
<!--     <p class="caption"><a href="http://www.nngroup.com/articles/two&#45;basic&#45;hypertext&#45;presentation&#45;models/">Hypertext Presentation Models</a></p> -->
<!-- </section> -->

<!-- <section style="text&#45;align:center;padding&#45;top:1em;"> -->
<!-- <img src="img/scroll_vs_step.png" style="height:100%;"/> -->
<!-- </section> -->

<section style="text-align:center;padding-top:4em;">
  <p class="title">MobileScroll?</p>
</section>

<section style="text-align:center;padding-top:0em;">
<img src="img/examples_mobile.png" class="tootall"/>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle">Wrong to Scroll?</p>
  <p class="subtitle grey">Or Just Too Slow?</p>
</section>

<!-- <section style="text&#45;align:center;padding&#45;top:1em;"> -->
<!-- <img class="toowide" src="img/jeter.jpg" style=""/> -->
<!-- </section> -->

<section style="text-align:center;padding-top:1em;">
<img class="toowide" src="img/dawn_wall.jpg" style=""/>
</section>

<section style="text-align:center;padding-top:1em;background-color:black;">
  <video class="tootall" preload='none' src="webm/mobile1.webm" loop></video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2014/03/31/science/motorcycle-helmet-laws.html">Fewer Helmets More Deaths</a></p>
</section>

<section style="text-align:center;padding-top:1em;background-color:black;">
  <video class="tootall" preload='none' src="webm/mobile2.webm" loop></video>
    <p class="caption"><a href="http://www.nytimes.com/interactive/2015/03/06/world/europe/russias-endgame-in-ukraine.html">Russia's Endgame</a></p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Swipe</p>
  <p class="subtitle grey" >The New Scroll?</p>
  <!-- <p class="subtitle grey" >The Card Shark Returns?</p> -->
</section>


<section style="text-align:center;padding-top:0em;">
<img src="img/mobilevis.png" style="width:100%;"/>
</section>

<section style="text-align:center;padding-top:0em;">
<img src="img/mobilevis_counts.png" style="height:100%;"/>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="title">Scroll Tools</p>
</section>

<section style="text-align:center;padding-top:4em;">
  <p class="subtitle">Libraries</p>
  <a class='subtitle' href="http://janpaepke.github.io/ScrollMagic/">ScrollMagic</a><br/><br/>
  <a class='subtitle' href="https://github.com/Prinzhorn/skrollr">Skrollr</a><br/><br/>
  <a class='subtitle' href="http://www.idangero.us/swiper/">Swiper</a><br/><br/>
  <a class='subtitle' href="https://github.com/1wheel/graph-scroll">graph-scroll</a><br/><br/>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/pleens.png" class="toowide"/>
    <p class="caption"><a href="http://www.pleens.com/">Pleens</a></p>
</section>

<section style="text-align:center;padding-top:1em;">
<img src="img/odessy.png" class="toowide"/>
    <p class="caption"><a href="http://cartodb.github.io/odyssey.js/">Odyssey.js</a></p>
</section>

<section style="text-align:center;padding-top:0;">
  <p class="subtitle">Special Thanks To:</p>
  <p class="subtitle" >Adam Pearce</p>
  <p class="subtitle grey" >@adamrpearce</p>
  <p class="subtitle" >Irene Ros</p>
  <p class="subtitle grey" >@ireneros</p>
</section>

<section style="text-align:center;padding-top:0;">
  <p class="title">Thanks</p>
  <p class="subtitle" >vallandingham.me</p>
  <p class="subtitle" >@vlandham</p>
</section>


<section style="text-align:center;padding-top:0;">
  <p class="title">Thanks</p>
  <p class="subtitle" >vallandingham.me</p>
  <p class="subtitle" >@vlandham</p>
</section>



<script src="js/prism.js"></script>
<script src="js/d3.min.js"></script>
<script src="js/stack.v1.min.js"></script>
<script>

var mystack = stack()
    .on("activate", activate)
    .on("deactivate", deactivate);

var section = d3.selectAll("section"),
    force = d3.select("#force"),
    forceIndex = section[0].indexOf(force.node()),
    transition = d3.select("#transition"),
    transitionIndex = section[0].indexOf(transition.node()),
    circle = d3.select("#circle"),
    circleIndex = section[0].indexOf(circle.node()),
    circle2 = d3.select("#circle2"),
    circle2Index = section[0].indexOf(circle2.node()),
    circle3 = d3.select("#circle3"),
    circle3Index = section[0].indexOf(circle3.node()),
    named = d3.select("#named"),
    namedIndex = section[0].indexOf(named.node()),
    follow = d3.select("#follow"),
    followAnchor = d3.select("#follow-anchor");


function startVideo(i) {
  var video = section.filter(function(d,j) { return i == j; }).select("video");
  video.each(function(d,j) {
      this.play();
  });
}

function stopVideo(i) {
  var video = section.filter(function(d,j) { return i == j; }).select("video");
  video.each(function(d,j) {
      this.pause();
  });
}

function setPageNumber(i) {
 d3.select("#pagenumber").html(i + 1);
}

function activate(d, i) {
  if (i === forceIndex) startForce();
  if (i === transitionIndex) startTransitions();
  if (i === circleIndex) startClobber(1);
  if (i === circle2Index) startClobber(2);
  if (i === circle3Index) startClobber(3);
  if (i === namedIndex) startClobber(0);
  startVideo(i);
  setPageNumber(i);
}

function deactivate(d, i) {
  if (i === forceIndex) stopForce();
  if (i === transitionIndex) stopTransitions();
  if (i === circleIndex) stopClobber(1);
  if (i === circle2Index) stopClobber(2);
  if (i === circle3Index) stopClobber(3);
  if (i === namedIndex) stopClobber(0);
  stopVideo(i);
}

/**
 * Returns a random integer between min (inclusive) and max (inclusive)
 * Using Math.round() will give you a non-uniform distribution!
 */
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

var circleTimeouts = [];

function stopClobber(index) {

  // circleInterval = clearInterval(circleInterval);
  clearTimeout(circleTimeouts[index]);
  console.log('stop circle');
}

function startClobber(index) {
  function circle(id,timeout) {
     var width = 1280,
         height = 720;

    width = window.innerWidth;
    height = window.innerHeight;

    var r = 70;
    var toggle = false;

    var vis = d3.select(id)
      .style("position", "absolute")
      .style("top", 0)
      .style("left", 0)
      .style("width", "100%")
      .style("height", "100%");

    vis.attr("width", width)
      .attr("height", height);

    var data = [1];

    console.log('circle');

    vis.selectAll(".circle").data(data)
      .enter().append("circle")
      .attr("fill", "#008080")
      .attr("class", "circle")
      .attr("r", r);

    var tris = [1,2];

    vis.selectAll(".triangle").data(tris)
      .enter().append("path")
      .attr("fill", "#000")
      .attr("class", "triangle")
      .attr("d", function(d,i) {
        var path;
        if(i === 0) {
          path = "M " + (r + 15 ) + " " + ((height / 2) - (r - 15) );
          path += "l 15 -15";
          path += "l -15 -15";
          path += "l -15 15Z";
          } else {
          path = "M " + (width - (r + 15)) + " " + ((height / 2) - (r - 15));
          path += "l -15 -15";
          path += "l 15 -15";
          path += "l 15 15Z";
          }
        return path
      })



    vis.selectAll(".circle")
      .attr("cx", r + 20)
      .attr("cy", (height / 2) - (r));

    function animate(timeout) {
      var x = toggle ? (r + 20) : (width - (r + 20));
      var color = toggle ? "#008080" : "#DE0016";

      vis.selectAll(".triangle")
        .attr('opacity', function(d,i) {
            var on = toggle ? 0 : 1
            return (i == on) ? 1 : 0;
        });

      console.log(x);
      var duration = 1800;
      if(index > 1) {
        if(toggle) {
          duration = 4000;
        }
      }

      if(index < 3 || toggle) {
      vis.selectAll(".circle")
        .transition("move")
        .duration(duration)
        .attr("cx", x);
      } else {
        console.log('interrupt');
        vis.selectAll(".circle")
          .attr("cx", x);
      }
      if(index == 0) {
      vis.selectAll(".circle")
        .transition("color")
        .duration(duration)
        .attr("fill", color);
      }

      toggle = toggle ? false : true;
      circleTimeouts[index]= setTimeout(animate, timeout, timeout);
    }
    animate(timeout);
  }
  if (index == 0) {
    circle("#namedSVG", 2000);
  } else if (index === 1) {
    circle("#circleSVG", 2000);
  } else if (index === 2) {
    circle("#circle2SVG", 2000);
  } else if (index === 3) {
    circle("#circle3SVG", 2000);
  }
}

var transitionTimeout;
var setupTrans = false;

function stopTransitions() {
  clearTimeout(transitionTimeout);
}

function startTransitions() {
  function animateBig(id,clipId) {
    var svg = d3.select(id);
    var bw = 20;
    var width = svg.attr("width");
    var height = svg.attr("height");
    var aspect = width / height;
    if (!setupTrans) {
      svg.attr("viewBox", "0 0 " + width + " " + height);
      svg.attr("preserveAspectRatio", "xMidYMid");
    }
    var data = [];
    var i =0;
    var n = 20;
    while(i < n) {
      data.push({x:getRandomInt(0,width),y:getRandomInt(0,height), dir:Math.random() > 0.4});
      i += 1;
    }

    svg.selectAll(".outline").data(data)
      .enter().append("rect")
      .attr("class", "outline")
      .attr("width", bw)
      .attr("height", bw)
      .attr('x', function(d) {return d.x;})
      .attr('y', function(d) {return d.y;})
      .attr("fill", "none")
      .attr("stroke", "black")
      .attr("stroke-width", 2)
      .attr("stroke-opacity", 0.7);

    svg.select(clipId).selectAll("rect").data(data)
      .enter().append("rect")
      .attr("width", bw)
      .attr("height", bw)
      .attr('x', function(d) { return d.x; })
      .attr('y', function(d) { return d.y; });

    animate = function() {
      console.log('animate');
      data.forEach(function(d) {
        if(d.dir) {
          d.x = getRandomInt(bw, (width - (bw * 3)));
          } else {
          d.y = getRandomInt(bw, (height - bw));
          }
        d.dir = d.dir ? false : true;
      });

      svg.select(clipId).selectAll("rect").data(data)
        .transition()
        .duration(1000)
        .delay(function(d,i) {return i * 20;})
        .ease("exp-out")
        .attr("x", function(d) {return d.x;})
        .attr("y", function(d) {return d.y;});

      svg.selectAll(".outline").data(data)
        .transition()
        .duration(1000)
        .delay(function(d,i) {return i * 20;})
        .ease("exp-out")
        .attr("x", function(d) {return d.x;})
        .attr("y", function(d) {return d.y;});

      transitionTimeout = setTimeout(animate, 1100);
    }
    animate();

    function resize() {
      var p = svg.node().parentNode;
      targetWidth = +d3.select(p).style("width").replace("px","");
      svg.attr("width", targetWidth);
      svg.attr("height", targetWidth / aspect);
    }
    if (!setupTrans) {
      resize();
    }
  }
  animateBig("#title2", "#path2");
  setupTrans = true;
}

var forceInterval;

function startForce() {
  var width = 1280,
  height = 720;

  var nodes = [],
      links = [],
      node,
      link;

  width = window.innerWidth;
  height = window.innerHeight;

  function charge(d) {
    return -((Math.pow(d.size, 2.0) / 5)); //* (Math.random() * 4));
  }

  function distance(l) {
    return (l.length * 120);// * (Math.random() * 3);
  }

  function tick(e) {
    node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
    link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });
  };


  var force = d3.layout.force()
    .nodes(nodes)
    .links(links)
    .size([width, height])
    .on("tick", tick)
    .linkDistance(distance)
    .charge(charge)
    .gravity(0.0);

  var vis = d3.select("#forcevis")
    .style("position", "absolute")
    .style("top", 0)
    .style("left", 0)
    .style("width", "100%")
    .style("height", "100%");

  vis.attr("width", width)
    .attr("height", height);


  function update() {
    node = vis.selectAll(".node")
      .data(nodes)
      node.enter().append("image")
      .attr("xlink:href", function(d) { return "./img/face_nodes/" + d.name + ".png"; })
      .attr("class", "node")
      .attr("x", function(d) { return -(d.size / 2); })
      .attr("y", function(d) { return -(d.size / 2); })
      .attr("width", function(d) { return d.size; })
      .attr("height", function(d) { return d.size; })
      .call(force.drag);

    node.exit().remove();
    link = vis.selectAll("line.link")
      .data(links);

    link.enter().insert("line", ".node")
      .attr("class", "link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });
    force
      .start();
  }

  function load(error, data) {
    data.nodes.forEach(function(d) {
        if(d.fixed) {
          d.x = width / 2;
          d.y = (height / 2);// + (height / 4);
        }
        nodes.push(d);

      });
    data.links.forEach(function(l) { links.push(l);});
    update();
  }

  // forceInterval = setInterval(function() {
  //     force.stop().start();
  // }, 200);


  d3.json("./img/face_nodes/face.json", load)
}

function stopForce() {
  forceInterval = clearInterval(forceInterval);

  var vis = d3.select("#forcevis")
  d3.selectAll(vis.node().childNodes)
    .remove()
}

</script>
